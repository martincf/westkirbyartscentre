{% include header.html %}
  <h1 class="event--title"><span>{{ page.title }}</span></h1>
  <main class="content event--content">
  <div class="event--pay">
    <h1 class="event--pay-title">Book tickets</h1>
    {% if page.bookable == false %}

      <p class="event--nobooking">Tickets must be booked via the organiser:</p>
      <button class="event--organisertickets">
        <a href="{{ page.organiser_url }}">Organiser website &gt;</a>
      </button>
    {% elsif page.bookable == true %}

  <p class="event--price">&pound;{{ page.price }}</p>
  <p class="event--tickets">
    <script>
      function getTicketNo() {
        var tickets = document.getElementById("ticketNo").value;
        document.getElementById("totalTickets").innerHTML = tickets;

        // var tickets = document.getElementById("ticketNo").value;
        var ticketsTotal = {{ page.price }} * tickets;
        document.getElementById("totalPrice").innerHTML = ticketsTotal;
        document.getElementById("wpTotalPrice").value = ticketsTotal;
      }
      function getTicketsTotal() {
        var allTickets = document.getElementById("ticketNo").value;
        document.getElementById("wpTotalTickets").value += allTickets;
      }
    </script>

    Tickets: <input type="number" id="ticketNo" value="1" class="event--ticketno" onclick="getTicketNo()" />


    <p>Total tickets: <span id="totalTickets">1</span> - &pound;<span id="totalPrice">{{ page.price }}</span></p>

  </p>
  <form action="https://secure-test.worldpay.com/wcc/purchase" method="POST">
  <!-- This next line contains the testMode parameter - it species that the submission is a test submission -->
  <input type="hidden" name="testMode" value="100">
  <input type="hidden" name="instId" value="1254946">
  <input type="hidden" name="cartId" id="wpTotalTickets" value="{{ page.title }} ticket(s) x ">
  <input type="hidden" name="amount" id="wpTotalPrice" value="">
  <input type="hidden" name="currency" value="GBP">
  <input class="event--purchase" type="submit" value="Buy tickets" onclick="getTicketsTotal()">
  </form>
  {% endif %}



</div>
  <div class="event--data">
      <!-- Get event date -->
      <p class="event--date">{{ page.date | date: '%A, %d %b %Y' }} â€“ {{ page.time }} </p>
      <p class="event--genre">{{ page.type }}</p>
      <!-- Go to www.addthis.com/dashboard to customize your tools -->
      <div class="addthis_inline_share_toolbox_41ud"></div>
  </div>
  <article  markdown="1" class="event--details">
    {{ page.content | markdownify }}
  </article>
  </main>
{% include footer.html %}
